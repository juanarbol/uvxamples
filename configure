#!/usr/bin/env python3
# -*- coding: UTF-8 -*-

import os
# TODO: build to all OS

# Create dependencies folder, and cd to that folder.
createDepsFolder = "mkdir -p deps/uv"
depsFolder = os.getcwd() + "/deps/uv"
os.system(createDepsFolder)
os.chdir(depsFolder)

# libuv and gyp repositories.
downloadLibuv = "git clone https://github.com/libuv/libuv ."
downloadGyp = "git clone https://chromium.googlesource.com/external/gyp ./build/gyp"

# Clone libuv and gyp.
os.system(downloadLibuv)
os.system(downloadGyp)

# Build libuv using gyp and xcode.
os.system("./gyp_uv.py -f xcode")
os.system("xcodebuild -ARCHS=\"x86_64\" -project out/uv.xcodeproj -configuration Release -alltargets")
